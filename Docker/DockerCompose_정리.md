# Docker Compose 정리

docker compose는 여러 개의 docker 컨테이너의 실행을 한 번에 관리할 수 있게 도와주는 툴이다. 예로들어, 도커 컨테이너로 시스템을 구축하면 하나 이상의 컨테이너가 서로 통신하며 그 사이에서 의존 관계가 형성된다. 그런데 이런 방식으로 시스템을 구축할 때 단일 컨테이너만 다룰때와 비교하면 새로운 문제가 발생할 가능성이 있고 주의가 필요한 부분이 있다.    

결론은 정리하자면 Docker Compose는 다음과 같이 정의할 수 있다. `docker compose는 다수의 컨테이너를 쉽게 운용하기 위한 도구`

## 특징

- yaml 포맷으로 스크립트 파일로 작성된다
- 여러 개의 컨테이너의 실행을 한 번에 관리할 수 있도록 도와준다
- 즉, 다수의 컨테이너를 실행하기 위해서 명령어를 하나씩 일일이 입력하지 않고 파일 하나로 대체하여 한 번에 명령어 입력으로 간편하게 사용할 수 있도록 도와준다

<br>

## 문법

- version: docker-compose.yml 파일의 버전 명시, docker-compose.yml 버전에 따라 도컨 엔진의 버전도 바뀐다
- services: 실행할 컨테이너를 정의한다
- image: 컨테이너에 사용할 이미지 이름과 태그를 지정해준다, 태그를 생략하면 기본으로 latest가 적용된다, 이미지가 없을 때 자동으로 이미를 Pull해온다
- ports: 컨테이너와 연결할 포트들 명시, `{호스트 포트}:{컨테이너 포트}`
- environment: 컨테이너에서 사용할 환경변수들을 명시, `{환경변수 명}:{값}`
- volumes: 마운트하려는 디렉토리 명시, `{호스트 디렉토리}:{컨테이너 디렉토리}`
- restart: 재시작 정책, `no/always/on-failure/unless-stopped` 이러한 옵션 값이 있음
- build: 이미지를 자체 빌드 후 사용한다, image 속성 대신 사용한다, 이곳에 사용할 별도의 Dockerfile이 필요하다

<br>

## 명령어

- up: docker-compose.yml에 정의된 컨테이너를 실행
- start: 멈춘 컨테이너를 재개한다
- stop: 컨테이너를 멈춘다
- down: 컨테이너를 종료하고 삭제한다
- logs: 컨테이너의 로그를 확인한다
- ps: 컨테이너 목록을 확인한다
- exec: 실행 중인 컨테이너에서 명령어를 실행한다
- build: 컨테이너 build 부분에 작성된 스크립트 내용대로 빌드한다


